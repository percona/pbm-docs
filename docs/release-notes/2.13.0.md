# Percona Backup for MongoDB 2.13.0 
({{date.2_13_0}})

[Installation](../installation.md){.md-button}


Percona Backup for MongoDB (PBM) is a distributed, low-impact solution for creating consistent backups of MongoDB sharded clusters and replica sets, and for restoring those backups to a specific point in time.

## Release Highlights

=== "üõ°Ô∏è Workload Identity Federation (WIF)"
    ### Secure GCS Backups with Workload Identity Federation (WIF)for PBM
    Percona Backup for MongoDB (PBM) 2.13.0 now supports Workload Identity Federation (WIF) for authenticating with Google Cloud Storage (GCS).

    This feature enables secure backup uploads without relying on static service account JSON keys. Instead, PBM uses short-lived, automatically refreshed tokens obtained through federation with an external identity provider (IdP). 

    Workload Identity Federation lets on-premises or multicloud workloads access Google Cloud resources using federated identities instead of a service account key, eliminating the maintenance and security burden of service account keys.

    To dive deep into this feature, refer to our comprehensive [documentation](https://docs.percona.com/percona-backup-mongodb/details/workload-identity-auth.html).


=== "üîê Selective backups"
    ### Support for selective backup with users and roles

    Percona Backup for MongoDB allows you to create selective backups of databases and collections, including the users and roles defined within the database. This ensures that access control is restored along with the data.

    To back up a specific namespace and include users and roles:

    ```bash
    pbm backup --ns="mydb.*" --with-users-and-roles
    ```

    For more insights into this feature, see our [documentation](https://docs.percona.com/percona-backup-mongodb/usage/backup-selective.html#selective-backup-with-users-and-roles).


## Changelog

### New features

- [PBM-1660](https://perconadev.atlassian.net/browse/PBM-1660): Percona Backup for MongoDB (PBM) 2.13.0 now supports **Workload Identity Federation (WIF)** for authenticating with Google Cloud Storage (GCS).

- [PBM-1294](https://perconadev.atlassian.net/browse/PBM-1294): Percona Backup for MongoDB allows you to create selective backups of databases and collections, including the users and roles defined within the database.


### Improvements

- [PBM-1438](https://perconadev.atlassian.net/browse/PBM-1438): We have added indices across all PBM collections to improve query efficiency and reduce response times when accessing `pbmLog` data. This enhancement ensures faster log retrieval and smoother performance during backup and restore operations, particularly in environments with large datasets or frequent queries.

- [PBM-1521](https://perconadev.atlassian.net/browse/PBM-1521): You can now restore the desired database to a specific point in time, including all associated users and roles. This enhancement ensures that both data and access configurations are consistently recovered.

- [PBM-1563](https://perconadev.atlassian.net/browse/PBM-1563): We have added support for treating MongoDB error code 50917 (oplog rollover during backup cursor establishment) as a retryable error during physical backups. This aligns with the existing handling of error code 50915 (checkpoint conflict) and improves backup reliability by automatically retrying when transient oplog rollover issues occur.

- [PBM-1645](https://perconadev.atlassian.net/browse/PBM-1645): PBM now triggers a storage re-sync only when the storage identity/connection parameters change. Updates to storage settings that don‚Äôt affect how PBM connects to the backend no longer force a re-sync, reducing unnecessary load and avoiding avoidable delays during configuration changes.

- [PBM-1649](https://perconadev.atlassian.net/browse/PBM-1649): The `pbm cleanup` command now supports targeting a specific storage profile via a new `--profile` flag. You can run `pbm cleanup --older-than=<TIMESTAMP> --profile=<profile_name>` to clean up backups on the selected profile. If `--profile` is omitted, PBM preserves the existing behavior and performs cleanup using the main profile for full backward compatibility.

- [PBM-1663](https://perconadev.atlassian.net/browse/PBM-1663) Improve Profile's feature UX

- [PBM-1665](https://perconadev.atlassian.net/browse/PBM-1665) Logical backup on the external storage \(profile\) should keep PITR slicing

- [PBM-1673](https://perconadev.atlassian.net/browse/PBM-1673) Messages during oplog replay are confusing

- [PBM-1690](https://perconadev.atlassian.net/browse/PBM-1690) Support of the agent's restart for the purpose of Snapshot Restore flow

## Fixed bugs

- [PBM-1488](https://perconadev.atlassian.net/browse/PBM-1488) PITR will stop saving the oplog if the process of copying the oplog from the backup fails

- [PBM-1561](https://perconadev.atlassian.net/browse/PBM-1561) Selective Logical Restore - Time monotonicity violation

- [PBM-1614](https://perconadev.atlassian.net/browse/PBM-1614)  <physical> failed \[ERROR: check backup files: read backup metadata: decode: invalid character 'c' looking for beginning of value\] \[2025-09-05T04:26:03\]

- [PBM-1691](https://perconadev.atlassian.net/browse/PBM-1691) CLI leaks SSE credentials in case of the JSON output
